<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="boardDao">

	 <resultMap type="Board" id="board">
		<result column="BOARD_CODE" property="boardCode"/>
		<result column="BOARD_TITLE" property="boardTitle"/>
		<result column="BOARAD_CONTENT" property="boardContent"/>
		<result column="BOARD_WRITER" property="boardWriter"/>
		<result column="BOARD_REGDATE" property="boardRegdate"/>
		
	</resultMap>

		<!--게시판 작성  -->
	  <insert id="BoardInsert" parameterType="board">
	  		insert into board(
	  		 board_code
	  		,board_title
	  		,board_content
	  		,board_writer
	  		,board_regdate
	  		
	  		)values(
	  		board_code_seq.nextval
	  		,#{boardTitle}
	  		,#{boardContent}
	  		,#{boardWriter}
	  		,sysdate
	  		
	  		)
	  </insert>

		
		<!--게시판 목록  -->
		<!-- 값이 안나올때는 as 별칭 생성해주기 -->
	   <select id="BoardList" parameterType="board" resultType="board">
			select * from 
				(select rownum as rn, a. *from
					(select board_code as boardCode
	   			  ,board_title as boardTitle
	   			  ,board_content as boardContent
	   			  ,board_writer as boardWriter
	   			  ,board_regdate as boardRegDate
	   			from board
	   			where board_title like '%'||#{keyword}||'%'
	   			or board_writer like '%'||#{keyword}||'%'
	   			or board_content like '%'||#{keyword}||'%'
	   			
	   			order by board_code desc
				) a )
				where rn between #{start} and #{end}
				
	   </select>		
		
	 <select id="ListTotal"  parameterType="board"  resultType="int">
				select count(*) 
				from board 					
				where  board_title like '%'||#{keyword}||'%'
					or board_writer like '%'||#{keyword}||'%'
					or board_content like '%'||#{keyword}||'%'
	   </select>	
		
		
		<!--게시판 조회 -->
		<select id="BoardRead" parameterType="board" resultType="board">
			select board_code as boardCode,
				   board_title as boardTitle,
				   board_content as boardContent,
				   board_writer as boardWriter,
				   board_regdate as boardRegdate
			from board 
			where board_code = #{boardCode}		   
		
		</select>
	   
	   <!--게시판 수정  -->
		<update id="BoardUpdate" parameterType="board">
				UPDATE BOARD 
					SET BOARD_WRITER = #{boardWriter},
						BOARD_TITLE = #{boardTitle},
						BOARD_CONTENT = #{boardContent}
				WHERE BOARD_CODE = #{boardCode}		 
		
		</update>	  
		
		<!--게시판 삭제   -->
		<delete id="BoardDelete" parameterType="board">
				DELETE
				FROM BOARD
				WHERE BOARD_CODE = #{boardCode}
				
		</delete> 
	   
	   
	


</mapper>